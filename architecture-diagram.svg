<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 650" style="font-family: 'Segoe UI', sans-serif;">
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#64748b" />
    </marker>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="3" dy="3" stdDeviation="4" flood-color="#000000" flood-opacity="0.1" />
    </filter>
    <linearGradient id="grad-client" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#f8fafc;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#e2e8f0;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="grad-firebase" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#ffedd5;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#fdba74;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="grad-ai" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#f3e8ff;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#d8b4fe;stop-opacity:1" />
    </linearGradient>
  </defs>

  <!-- Background -->
  <rect width="900" height="650" fill="#ffffff" />
  
  <!-- Title -->
  <text x="450" y="40" text-anchor="middle" font-size="24" font-weight="bold" fill="#0f172a">Arquitetura do Sistema - StudApp (PWA)</text>

  <!-- CLIENT BOUNDARY (Browser) -->
  <rect x="50" y="80" width="450" height="520" rx="15" fill="url(#grad-client)" stroke="#94a3b8" stroke-width="2" stroke-dasharray="5,5" />
  <text x="70" y="110" font-weight="bold" fill="#64748b" font-size="14">CLIENTE / BROWSER (PWA)</text>

  <!-- UI Components Layer -->
  <rect x="80" y="140" width="390" height="260" rx="10" fill="white" stroke="#cbd5e1" stroke-width="1" filter="url(#shadow)" />
  <text x="275" y="165" text-anchor="middle" font-weight="bold" fill="#334155" font-size="14">Camada de UI (React 19)</text>

  <g transform="translate(100, 190)">
    <rect x="0" y="0" width="100" height="60" rx="5" fill="#eff6ff" stroke="#3b82f6" />
    <text x="50" y="25" text-anchor="middle" font-size="12" font-weight="bold" fill="#1e40af">App.tsx</text>
    <text x="50" y="45" text-anchor="middle" font-size="10" fill="#1e40af">Router / State</text>
  </g>

  <g transform="translate(230, 190)">
    <rect x="0" y="0" width="100" height="60" rx="5" fill="#eff6ff" stroke="#3b82f6" />
    <text x="50" y="25" text-anchor="middle" font-size="12" font-weight="bold" fill="#1e40af">AuthScreen</text>
    <text x="50" y="45" text-anchor="middle" font-size="10" fill="#1e40af">Login / Signup</text>
  </g>

  <g transform="translate(100, 270)">
    <rect x="0" y="0" width="100" height="60" rx="5" fill="#eff6ff" stroke="#3b82f6" />
    <text x="50" y="25" text-anchor="middle" font-size="12" font-weight="bold" fill="#1e40af">RoutineView</text>
    <text x="50" y="45" text-anchor="middle" font-size="10" fill="#1e40af">AI Form / List</text>
  </g>

  <g transform="translate(230, 270)">
    <rect x="0" y="0" width="100" height="60" rx="5" fill="#eff6ff" stroke="#3b82f6" />
    <text x="50" y="25" text-anchor="middle" font-size="12" font-weight="bold" fill="#1e40af">ReviewsView</text>
    <text x="50" y="45" text-anchor="middle" font-size="10" fill="#1e40af">Spaced Repetition</text>
  </g>

  <g transform="translate(165, 350)">
    <rect x="0" y="0" width="120" height="30" rx="15" fill="#f0fdf4" stroke="#16a34a" />
    <text x="60" y="20" text-anchor="middle" font-size="11" font-weight="bold" fill="#166534">XLSX Export</text>
  </g>

  <!-- Service Layer (Internal) -->
  <rect x="80" y="420" width="390" height="150" rx="10" fill="#f8fafc" stroke="#94a3b8" stroke-width="1" />
  <text x="275" y="440" text-anchor="middle" font-weight="bold" fill="#475569" font-size="13">Services / Logic Layer</text>

  <g transform="translate(100, 460)">
    <rect x="0" y="0" width="160" height="40" rx="5" fill="#fff7ed" stroke="#f97316" />
    <text x="80" y="25" text-anchor="middle" font-size="12" font-weight="bold" fill="#9a3412">Firebase SDK</text>
  </g>

  <g transform="translate(290, 460)">
    <rect x="0" y="0" width="160" height="40" rx="5" fill="#faf5ff" stroke="#9333ea" />
    <text x="80" y="25" text-anchor="middle" font-size="12" font-weight="bold" fill="#6b21a8">Google GenAI SDK</text>
  </g>

  <g transform="translate(100, 520)">
    <rect x="0" y="0" width="350" height="30" rx="5" fill="#f1f5f9" stroke="#64748b" stroke-dasharray="3,3" />
    <text x="175" y="20" text-anchor="middle" font-size="11" font-weight="bold" fill="#475569">Browser APIs: Service Worker (Cache) + SpeechRecognition</text>
  </g>

  <!-- CLOUD SERVICES -->
  
  <!-- Firebase Cluster -->
  <rect x="580" y="100" width="250" height="260" rx="15" fill="url(#grad-firebase)" stroke="#f97316" stroke-width="2" filter="url(#shadow)" />
  <text x="705" y="130" text-anchor="middle" font-weight="bold" fill="#9a3412" font-size="16">Firebase Cloud</text>

  <g transform="translate(630, 160)">
    <path d="M0 10 Q0 0 10 0 L140 0 Q150 0 150 10 L150 50 Q150 60 140 60 L10 60 Q0 60 0 50 Z" fill="white" stroke="#ea580c" stroke-width="2" />
    <text x="75" y="35" text-anchor="middle" font-weight="bold" fill="#ea580c">Authentication</text>
  </g>

  <g transform="translate(630, 250)">
    <path d="M0 15 Q75 -10 150 15 L150 75 Q75 100 0 75 Z" fill="white" stroke="#ea580c" stroke-width="2" />
    <path d="M0 15 Q75 40 150 15" fill="none" stroke="#ea580c" stroke-width="1" />
    <text x="75" y="55" text-anchor="middle" font-weight="bold" fill="#ea580c">Firestore (NoSQL)</text>
    <text x="75" y="70" text-anchor="middle" font-size="10" fill="#ea580c">Users / Routine / Lessons</text>
  </g>

  <!-- AI Cluster -->
  <rect x="580" y="400" width="250" height="150" rx="15" fill="url(#grad-ai)" stroke="#9333ea" stroke-width="2" filter="url(#shadow)" />
  <text x="705" y="430" text-anchor="middle" font-weight="bold" fill="#6b21a8" font-size="16">Google AI Studio</text>
  
  <g transform="translate(630, 460)">
    <circle cx="75" cy="40" r="35" fill="white" stroke="#9333ea" stroke-width="2" />
    <text x="75" y="35" text-anchor="middle" font-weight="bold" font-size="12" fill="#6b21a8">Gemini</text>
    <text x="75" y="50" text-anchor="middle" font-size="10" fill="#6b21a8">3.0 Flash</text>
  </g>

  <!-- CONNECTIONS -->
  
  <!-- UI to Services -->
  <line x1="275" y1="400" x2="275" y2="420" stroke="#64748b" stroke-width="2" marker-end="url(#arrow)" />

  <!-- Auth Connection -->
  <path d="M260 480 L580 190" stroke="#f97316" stroke-width="2" fill="none" marker-end="url(#arrow)" />
  <rect x="380" y="300" width="80" height="20" fill="white" stroke="#f97316" rx="4"/>
  <text x="420" y="314" text-anchor="middle" font-size="10" fill="#f97316">Auth Tokens</text>

  <!-- DB Connection -->
  <path d="M260 480 L580 300" stroke="#f97316" stroke-width="2" fill="none" marker-end="url(#arrow)" />
  <rect x="340" y="360" width="120" height="20" fill="white" stroke="#f97316" rx="4"/>
  <text x="400" y="374" text-anchor="middle" font-size="10" fill="#f97316">Sync / onSnapshot</text>

  <!-- AI Connection -->
  <path d="M450 480 L580 480" stroke="#9333ea" stroke-width="2" fill="none" marker-end="url(#arrow)" />
  <rect x="470" y="465" width="90" height="30" fill="white" stroke="#9333ea" rx="4"/>
  <text x="515" y="478" text-anchor="middle" font-size="10" fill="#9333ea">Prompt (Text)</text>
  <text x="515" y="489" text-anchor="middle" font-size="10" fill="#9333ea">JSON Response</text>

</svg>